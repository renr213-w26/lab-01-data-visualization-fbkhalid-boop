---
title: "Lab 1 - Data visualization"
format: html
editor: visual
---



# Questions
```{r}
library(tidyverse)
```

## Part 1

### Question 1

```{r}

ggplot(midwest, aes(x = popdensity)) +
  geom_histogram(binwidth = 100) +
  labs(title = "Midwest Population Density", subtitle = "Binwidth = 100", 
       x = "Density", y = "Count")


ggplot(midwest, aes(x = popdensity)) +
  geom_histogram(binwidth = 1000) +
  labs(title = "Midwest Population Density", subtitle = "Binwidth = 1,000", 
       x = "Density", y = "Count")


ggplot(midwest, aes(x = popdensity)) +
  geom_histogram(binwidth = 10000) +
  labs(title = "Midwest Population Density", subtitle = "Binwidth = 10,000", 
       x = "Density", y = "Count")


ggplot(midwest, aes(x = popdensity)) +
  geom_histogram(binwidth = 100000) +
  labs(title = "Midwest Population Density", subtitle = "Binwidth = 100,000", 
       x = "Density", y = "Count")

```
The binwidth of 10000 looks the best as it groups the data enough so you can see that almost everyone is in that first few buckets, but you can clearly see the long tail stretching to the right (the outliers). The plot with a binwidth of 100 is too messy and detailed to see the overall trend while the plot with a binwidth of 100,000 puts almost all the data into a single block which hides the shape of the distribution. The binwidth of 10,000 strikes a good balance by showing that the distribution is extremely right skewed while still showing us that there are a few counties with very high densities.

### Question 2
```{r}
ggplot(midwest, aes(x = popdensity)) +
  geom_boxplot() +
  labs(title = "Boxplot of Population Density", x = "Population Density")
midwest |> 
  arrange(desc(popdensity)) |> 
  select(county, state, popdensity)
```
The distribution of population density is very right-skewed. The boxplot has a very compressed box representing IQR on the far left, which means that the vast majority of counties have very low population density. There are many outliers extending to the right side of the x-axis. By sorting population density descendingly, we can see that Cook County is the biggest outlier, which makes sense considering it contains Chicago.
### Question 3
```{r}
ggplot(midwest, aes(x = percollege, y = percbelowpoverty, color = state, shape = state)) +
  geom_point() +
  labs(title = "Poverty vs College Education by State",
       x = "Percent College Educated",
       y = "Percent Below Poverty",
       color = "State", shape = "State")

midwest |> 
  select(county, state, percbelowpoverty, percollege) |> 
  arrange(desc(percbelowpoverty))
```
It looks like there is a weak negative relationship between these variables generally, as the percentage of college-educated residents increases, the percentage of people below the poverty line decreases. There is a specific outlier county called Menominee in Wisconsin with low college education but very high poverty that sits far above the rest of the data. It is somewhat difficult to identify how the relationship varies across states in this plot because all the points are plotted on top of each other which makes it hard to distinguish the specific trends for each state.
### Question 4
```{r}
ggplot(midwest, aes(x = percollege, y = percbelowpoverty, color = state)) +
  geom_point() +
  geom_smooth(se = FALSE) +
  facet_wrap(~ state) +
  labs(title = "Poverty vs College Education Faceted by State",
       x = "Percent College Educated",
       y = "Percent Below Poverty",
       color = "State")
```
I prefer this plot over the plot in Question 3 because separating the states into their own graphs reduces the stacked points and makes it much easier to see the specific trends for each state. In the previous plot the points were too cluttered to see the differences but here we can clearly see that every state follows a similar negative trend. The smooth curve definitely helps identify trends and which states have stronger ones vs weaker ones.
### Question 5
```{r}
ggplot(midwest, aes(x = state, y = area)) +
  geom_boxplot() +
  labs(title = "Distribution of County Area by State",
       x = "State", y = "Area")

midwest |> 
  select(county, state, area) |> 
  arrange(desc(area))
```
Indiana looks to have the smallest median county area while Wisconsin and Michigan have larger median areas. Wisconsin appears to have the highest variability in county sizes as shown by their wider boxplots and longer whiskers. The state with the single largest county is Marquette, Michigan using the table.
### Question 6
```{r}
# Create the new variable
midwest <- midwest |>
  mutate(metro = if_else(inmetro == 1, "Yes", "No"))

# Plot the data
ggplot(midwest, aes(x = state, fill = metro)) +
  geom_bar(position = "fill") +
  labs(title = "Proportion of Metro Counties by State",
       x = "State", y = "Proportion", fill = "Metro Area")
```
It looks like Ohio has the highest percentage of counties located in metropolitan areas with a little less than 50 percent of its counties classified as metro. On the other hand Illinois appears to have the lowest percentages of metro counties at just over 25 percent.

### Question 7
```{r}
ggplot(midwest, aes(x = percollege, y = popdensity, color = state)) +
  geom_point(size = 2, alpha = 0.5) +
  facet_wrap(~ state) +
  scale_y_continuous(limits = c(0, 125000)) +
  labs(title = "Do people with college degrees\ntend to live in denser areas?",
       x = "% college educated",
       y = "Population density (person / unit area)",
       color = "State") +
  theme_minimal()

midwest |> 
  filter(state == "WI") |> 
  arrange(desc(popdensity)) |> 
  select(county, popdensity, percblack, percasian, percamerindan, percother)
```
A clear outlier in Wisconsin is Milwaukee. It has a much higher population density than any other county in the state. This county has a much higher percentage of other races compared to the typical Wisconsin county. For example the data shows that Milwaukee has a very high percentage of African American residents at over 20%, along with about 1.6% Asian, 0.7% Native American and 2.4% Other.
## Part 2

**Enough about the Midwest!**

### Question 8
```{r}
nc_county <- read_csv("data/nc-county.csv")

ggplot(nc_county, aes(x = land_area_mi2, y = density)) +
  geom_point() +
  labs(title = "Population Density vs Land Area (Square Miles)",
       x = "Land Area (Square Miles)",
       y = "Population Density")
```
I guessed that there might be a negative relationship because large counties are often rural and have lower population densities. The scatter plot confirms this as it shows a weak negative relationship where counties with very large land areas tend to have lower population densities while the highest density counties have smaller land areas. My guess was not completely correct as there does not seem to be at least a very obvious correlation.

### Question 9

```{r}
ggplot(nc_county, aes(x = land_area_m2, y = density)) +
  geom_point() +
  labs(title = "Population Density vs Land Area (Square Meters)",
       x = "Land Area (Square Meters)",
       y = "Population Density")
```

This scatterplot looks exactly the same as the one in question 8. The relationship is displayed the same because square miles and square meters are just different units for measuring the exact same thing. Changing the units changes the numbers on the axis but does not change the shape of the data points relative to each other.
